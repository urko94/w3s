import{_ as K,m as ae,k as le,u as ie,g as re,h as ce,r as z,e as de,c as ue,d as me,a as pe,b as _e}from"./index.esm.8313010c.mjs";import{a as W,r as T,o,h as r,j as c,u as a,S as F,i as e,ac as fe,n as ge,g as he,a8 as J,a9 as ve,O as q,m as C,v as S,b as X,f as se,B as xe,A as we,z as ye,e as O,c as Y,w as M,x as Q,y as G,K as be,t as ke,l as Z,k as $e,q as oe,ab as Se,M as Ce,a4 as Te,ad as te,G as Ve,H as Ee,I as Ie,ae as Ae}from"./entry.2c1b8938.mjs";import{_ as ne}from"./Btn.43733854.mjs";const De=["data-aos","data-aos-delay"],Me=["innerHTML"],Re=W({__name:"Event",props:{title:{type:String,default:null},name:{type:String,default:null},description:{type:String,default:null},date:{type:[String,Date],default:null},startTime:{type:String,default:null},endTime:{type:String,default:null},location:{type:String,default:null},animation:{type:String,default:"fade"},animationDelay:{type:Number,default:0}},setup(t){const m=t,i=T(null),f={name:m.name,description:m.description,startDate:g(m.date),endDate:g(m.date),startTime:m.startTime,endTime:m.endTime,location:m.location,options:["Apple","Google","iCal","Microsoft365","Outlook.com"],timeZone:"Europe/Ljubljana",trigger:"click",iCalFileName:`Event-Web3Spaces-${m.name}`,listStyle:"modal",lightMode:"dark",size:"5"};function g(p){if(p instanceof Date){const n={year:"numeric",month:"2-digit",day:"2-digit"};return p.toLocaleDateString("fr-CA",n)}return p}function _(){fe(f,i.value)}return(p,n)=>{const w=K;return o(),r("div",{class:"body-sm flex min-h-[36px] items-center rounded-[98px] bg-white py-1 px-4 text-black md:whitespace-nowrap","data-aos":t.animation,"data-aos-delay":t.animationDelay},[c(w,{name:a(F).PlanetIntrodus,class:"mr-2 h-6 w-6"},null,8,["name"]),e("span",{innerHTML:t.title},null,8,Me),e("button",{ref_key:"btnRef",ref:i,class:"ml-2 text-blue-link underline",onClick:n[0]||(n[0]=u=>_())}," Add to calendar ",512)],8,De)}}}),Ne={key:0,class:"relative mx-auto flex w-fit flex-col mobile:max-w-full"},Le={key:0,class:"absolute top-full left-0 right-0 flex flex-col"},Pe=["data-aos-delay"],Ue=e("span",null,"close",-1),ze={key:2,class:"mt-2 text-center"},Fe=W({__name:"Events",props:{events:{type:Array,default:[]}},setup(t){const m=t,i=T(!1),f=m.events.filter(_=>!g(_==null?void 0:_.date));function g(_){if(_&&_ instanceof Date){const p=_.getTime()+72e5;return new Date().getTime()>p}return!1}return(_,p)=>{const n=Re,w=K;return a(f).length?(o(),r("div",Ne,[c(n,ge(he(a(f)[0])),null,16),a(f).length>1?(o(),r("div",Le,[i.value?(o(!0),r(J,{key:0},ve(a(f).slice(1),(u,A)=>(o(),r("div",{key:A,class:"mt-2"},[c(n,q(u,{animation:"fade-up",animationDelay:A*100}),null,16,["animationDelay"])]))),128)):C("",!0),i.value?(o(),r("div",{key:1,class:"mt-2 text-center","data-aos":"fade-up","data-aos-delay":a(f).length*100},[e("button",{onClick:p[0]||(p[0]=u=>i.value=!1),class:"mx-auto flex items-center"},[c(w,{name:a(F).Close,class:"mr-3 self-center"},null,8,["name"]),Ue])],8,Pe)):(o(),r("div",ze,[e("button",{onClick:p[1]||(p[1]=u=>i.value=!0)},"+ "+S(a(f).length-1)+" more",1)]))])):C("",!0)])):C("",!0)}}}),We={class:"relative inline-block"},Be={key:0,class:"body-sm mb-2 opacity-80"},je=e("strong",null," Connect with Metamask ",-1),He=["innerHTML"],Oe=W({__name:"MetamaskConnect",props:{size:{type:String,default:"sm"},minWidth:{type:String,default:"215px"},color:{type:String,default:"white",validator:t=>["white","orange","green","purple","blue"].includes(t)},loginMessage:{type:String,default:""}},emits:["click"],setup(t,{emit:m}){const i=X(),f=se(),{userAccount:g}=xe(),{getMessageSignature:_}=we(),{isMetamaskReady:p,isMetamaskConnected:n,isMetamaskChainConnected:w,connectToAccount:u,connectToChain:A}=ye(),k=T(!1),s=T(""),x=O(()=>i.jwt&&p.value);async function V(y){var b,l,E,$,D,R;if(x.value){m("click",y);return}k.value=!0,s.value="",p.value||(n.value||await u(),w.value||await A());try{const I=`${f.API_BASE}/users`,N=await Q.get(`${I}/auth-msg`),{message:L,timestamp:P}=N.data;if(!!L&&!!P){const U=await _(L);if(U)try{const d={wallet:g.value,signature:U,timestamp:P},B=await Q.post(`${I}/login`,d),{authToken:j,profile:H}=B.data;i.saveUser({jwt:j,user:H}),i.getTokens()}catch(d){console.error(d),d instanceof G.exports.AxiosError&&((l=(b=d==null?void 0:d.response)==null?void 0:b.data)==null?void 0:l.message)==="SIGNATURE_INVALID"?(console.error({title:"Signature error",message:"Invalid signature"}),s.value="Signature error: Invalid signature"):d instanceof G.exports.AxiosError&&(($=(E=d==null?void 0:d.response)==null?void 0:E.data)==null?void 0:$.message)==="USER_DOES_NOT_HOLD_REQUIRED_TOKENS"?(console.warn({title:"No NFTs detected in your wallet",message:"You need to own at least one NFT to sign in"}),s.value="No NFTs detected in your wallet: You need to own at least one NFT to sign in"):d instanceof G.exports.AxiosError&&((R=(D=d==null?void 0:d.response)==null?void 0:D.data)==null?void 0:R.message)==="INVALID_REQUEST"?(console.warn({title:"Invalid request",message:"You need to own at least one NFT to sign in"}),s.value="No NFTs detected in your wallet: You don't have permission to sign in"):s.value="Something went wrong, please try again later."}else console.error({title:"Signature error",message:"Could not capture your signature"}),s.value=ae()}}catch(I){console.error(I),s.value="Something went wrong, please try again later."}k.value=!1}return(y,b)=>{const l=ne,E=le;return o(),r("div",We,[a(x)?(o(),Y(l,q({key:0},y.$attrs,{size:t.size,class:["px-4",t.color],"min-width":t.minWidth,loading:k.value,tight:"",onClick:b[0]||(b[0]=$=>V())}),{default:M(()=>[be(y.$slots,"default")]),_:3},16,["size","class","min-width","loading"])):(o(),r(J,{key:1},[t.loginMessage?(o(),r("p",Be,S(t.loginMessage),1)):C("",!0),c(E,q(y.$attrs,{size:t.size,class:["px-4",t.color],"min-width":t.minWidth,tight:"",onClick:b[1]||(b[1]=$=>V())}),{default:M(()=>[je]),_:1},16,["size","class","min-width"])],64)),s.value?(o(),r("span",{key:2,class:"body-xs absolute left-0 top-full whitespace-normal text-center text-red",innerHTML:s.value},null,8,He)):C("",!0)])}}}),Ye={class:"relative mx-auto"},Ge={class:"flex"},Ke={class:"w-1/2 pr-[6px]"},qe={class:"w-1/2 pl-[6px]"},Qe={class:"mt-10 mb-5 flex"},Ze=oe(" SAVE "),Je=oe(" Cancel "),Xe={key:0,class:"body-sm float-left text-red"},et={key:1,class:"body-sm float-left flex items-center"},tt={class:"ml-4"},st=W({__name:"Profile",props:{color:{type:String,default:"green",validator:t=>["orange","green","purple","blue"].includes(t)}},emits:["close"],setup(t,{emit:m}){const i=X(),f=se(),g=T(""),_=T(""),p=T(!1),n=ke({firstname:i.user.firstname,lastname:i.user.lastname,email:i.user.email,company:i.user.company,position:i.user.position,linkedin:i.user.linkedin,email_notifications_bool:!!i.user.email_notifications}),u=ie({firstname:{$autoDirty:!0,required:z},lastname:{$autoDirty:!0,required:z},email:{$autoDirty:!1,required:z,email:de},company:{$autoDirty:!0,required:z},position:{$autoDirty:!0,required:z},linkedin:{},email_notifications_bool:{required:z}},n);async function A(){var x,V,y,b;if(await u.value.$validate(),u.value.$invalid)return;p.value=!0;const k=`${f.API_BASE}/users/edit-profile`,s={headers:i.axiosHeaders,params:{}};try{const l=await Q.put(k,n,s);if(!l.data)throw new Error("Service error.");i.saveUser({user:l.data}),_.value="Profile updated",g.value="",setTimeout(()=>m("close"),1e3)}catch(l){l instanceof G.exports.AxiosError&&((y=(V=(x=l.response)==null?void 0:x.data)==null?void 0:V.errors)==null?void 0:y.length)>0?g.value=(b=l.response)==null?void 0:b.data.errors[0].message.replaceAll("_"," "):g.value="Something went wrong, please try again later.",console.error(l)}p.value=!1}return(k,s)=>{var l,E,$,D,R,I,N,L,P,U,d,B,j,H;const x=re,V=ce,y=ne,b=K;return o(),r("div",Ye,[e("form",{onSubmit:s[8]||(s[8]=$e(h=>A(),["prevent"])),novalidate:""},[e("div",Ge,[e("div",Ke,[c(x,{modelValue:n.firstname,"onUpdate:modelValue":s[0]||(s[0]=h=>n.firstname=h),label:"First name*",error:(E=(l=a(u).firstname)==null?void 0:l.$errors[0])==null?void 0:E.$message.toString()},null,8,["modelValue","error"])]),e("div",qe,[c(x,{modelValue:n.lastname,"onUpdate:modelValue":s[1]||(s[1]=h=>n.lastname=h),label:"Last name*",error:(D=($=a(u).lastname)==null?void 0:$.$errors[0])==null?void 0:D.$message.toString()},null,8,["modelValue","error"])])]),c(x,{modelValue:n.email,"onUpdate:modelValue":s[2]||(s[2]=h=>n.email=h),type:"email",label:"E-mail address*",name:"email",error:(I=(R=a(u).email)==null?void 0:R.$errors[0])==null?void 0:I.$message.toString()},null,8,["modelValue","error"]),c(x,{modelValue:n.company,"onUpdate:modelValue":s[3]||(s[3]=h=>n.company=h),label:"Company*",error:(L=(N=a(u).company)==null?void 0:N.$errors[0])==null?void 0:L.$message.toString()},null,8,["modelValue","error"]),c(x,{modelValue:n.position,"onUpdate:modelValue":s[4]||(s[4]=h=>n.position=h),label:"Position in company*",error:(U=(P=a(u).position)==null?void 0:P.$errors[0])==null?void 0:U.$message.toString()},null,8,["modelValue","error"]),c(x,{modelValue:n.linkedin,"onUpdate:modelValue":s[5]||(s[5]=h=>n.linkedin=h),label:"Your linkedIn profile",error:(B=(d=a(u).linkedin)==null?void 0:d.$errors[0])==null?void 0:B.$message.toString()},null,8,["modelValue","error"]),c(V,{modelValue:n.email_notifications_bool,"onUpdate:modelValue":s[6]||(s[6]=h=>n.email_notifications_bool=h),label:"I would like to be notified of future Web3 Spaces Academy events and understand that I can withdraw my consent at any time.",error:(H=(j=a(u).email_notifications_bool)==null?void 0:j.$errors[0])==null?void 0:H.$message.toString()},null,8,["modelValue","error"]),e("div",Qe,[c(y,{type:"submit",class:Z(t.color),loading:p.value,width:"157px","min-width":"157px"},{default:M(()=>[Ze]),_:1},8,["class","loading"]),c(y,{class:"transparent ml-7",width:"200px","min-width":"200px",onClick:s[7]||(s[7]=h=>m("close")),tight:""},{default:M(()=>[Je]),_:1})]),g.value?(o(),r("div",Xe,S(g.value),1)):C("",!0),_.value?(o(),r("p",et,[c(b,{name:a(F).Checkmark},null,8,["name"]),e("span",tt,S(_.value),1)])):C("",!0)],32)])}}}),ot=""+new URL("Web3Spaces.d47ef129.svg",import.meta.url).href,nt=""+new URL("kalmia.9b45d8e5.svg",import.meta.url).href,ee=""+new URL("spaceman-head.3ad842c8.svg",import.meta.url).href,v=t=>(Ve("data-v-b528921f"),t=t(),Ee(),t),at={class:"absolute top-0 z-10 w-full"},lt={class:"container mx-auto flex max-w-[1680px] flex-wrap px-5 py-4 md:px-10 md:py-6"},it={class:"flex w-1/2 items-start mobile:flex-col md:w-1/4 md:items-center"},rt=v(()=>e("img",{src:ot,class:"min-w-[80px] py-1",alt:"Web3Spaces",width:"100",height:"28"},null,-1)),ct=v(()=>e("span",null,"Exit planet",-1)),dt={class:"w-full mobile:order-1 md:w-1/2"},ut={key:1,class:"relative"},mt={class:"absolute left-1/2 -top-[150px] mx-auto -ml-[60px] h-[120px] w-[120px] sm:-top-[120px] md:-top-[100px] md:-ml-[120px] md:h-[240px] md:w-[240px]","data-aos":"fade-down","data-aos-delay":"300"},pt={key:2,class:"flex flex-col justify-center divide-white/[.4] xl:flex-row xl:space-x-10 xl:divide-x"},_t=v(()=>e("div",{class:"my-2 flex w-full items-center justify-center space-x-6 md:my-0 md:w-auto"},[e("h6",{class:"whitespace-nowrap"},"Powered by"),e("a",{href:"https://www.kalmia.si",target:"_blank",title:"Kalmia"},[e("img",{src:nt,class:"mx-auto",alt:"Kalmia Logo",width:"126",height:"15"})])],-1)),ft={class:"flex w-full items-center justify-center md:w-auto xl:space-x-3 xl:pl-10"},gt=v(()=>e("span",{class:"body-xxs"},"Read more about Web3 Spaces on",-1)),ht={href:"https://web3-spaces.gitbook.io/web3-spaces-academy/",target:"_blank"},vt={key:0,class:"relative flex w-1/2 items-center justify-end md:w-1/4"},xt={class:"mr-4 flex items-center md:mr-7"},wt={class:"whitespace-nowrap"},yt={class:"hidden leading-9 md:inline-block"},bt=v(()=>e("img",{src:ee,class:"md:ml-3",alt:"Web3Spaces spaceman head",width:"24",height:"26"},null,-1)),kt={class:"flex flex-col items-center p-5 text-center"},$t=v(()=>e("img",{src:ee,class:"mb-1",alt:"Web3Spaces spaceman head",width:"64",height:"68"},null,-1)),St={class:"mb-1"},Ct={class:"mb-4 whitespace-nowrap"},Tt=v(()=>e("span",{class:"ml-2"},"Edit my profile",-1)),Vt=v(()=>e("hr",{class:"mb-4 w-full opacity-20"},null,-1)),Et={class:"mb-3 inline-block rounded-[60px] bg-white/20 py-2 px-4"},It=v(()=>e("span",{class:"mr-2"},"Yout token: ",-1)),At={key:0,class:"text-gold"},Dt={key:1},Mt=v(()=>e("p",{class:"mb-5 hidden"},"Transfer my token",-1)),Rt=v(()=>e("hr",{class:"mb-4 w-full opacity-20"},null,-1)),Nt={key:1,class:"flex w-1/2 items-center justify-end md:w-1/4"},Lt={key:2,class:"flex w-1/2 items-center justify-end md:w-1/4"},Pt=v(()=>e("h2",{class:"mb-10"},"Profile settings",-1)),Ut={class:"flex max-h-[85vh] flex-col pb-6 lg:flex-row"},zt={class:"mb-12 lg:w-[56%] lg:px-5"},Ft={class:"flex flex-col items-center"},Wt=v(()=>e("div",{class:"relative mx-auto mb-4 inline-block rounded-[50%] p-11"},[e("div",{class:"spaceman-bg absolute left-0 top-0 h-full w-full rounded-[50%]"}),e("div",{class:"foreground rounded-[50%]"}),e("img",{src:ee,class:"relative h-[196px] object-contain",alt:"Web3Spaces spaceman head",width:"196",height:"196"})],-1)),Bt=v(()=>e("strong",{class:"body-sm mb-2 tracking-widest"},"Connected wallet",-1)),jt={class:"mb-4"},Ht={class:"mb-3 inline-block rounded-[60px] bg-white/20 py-2 px-4"},Ot=v(()=>e("span",{class:"mr-2"},"Yout token: ",-1)),Yt={key:0,class:"text-gold"},Gt={key:1},Kt={class:"lg:w-[44%] lg:px-5"},qt=W({__name:"Nav",props:{color:{type:String,default:"green",validator:t=>["orange","green","purple","blue"].includes(t)},exit:{type:String,default:null},planet:{type:String,default:null},events:{type:Array,default:null}},setup(t){const m=t,i=X(),f=Se(),g=f.currentRoute.value.name;function _(){window.history.state.back!==null&&!window.history.state.back.includes("planet")&&f.go(-1),f.push(m.exit)}function p(){i.logout(),f.push("/")}const n=O(()=>i.tokenType==="vip"),w=T(i.user),u=T(!1),A=O(()=>[{"border-orange shadow-orange":m.color=="orange","border-green shadow-green":m.color=="green","border-purple shadow-purple":m.color=="purple","border-blue shadow-blue":m.color=="blue"}]),k=T(!1),s=()=>{k.value=!1,setTimeout(()=>k.value=!0,1)};function x(){k.value=!1}const V=Ce(),y=O(()=>[V.white]);return(b,l)=>{const E=Te("RouterLink"),$=K,D=ue,R=Fe,I=me,N=pe,L=Oe,P=st,U=_e;return o(),r(J,null,[e("nav",at,[e("div",lt,[e("div",it,[c(E,{to:"/"},{default:M(()=>[rt]),_:1}),t.exit?(o(),Y(D,{key:0,size:"sm",borderRadius:"60px",class:"px-4 md:ml-6",tight:"",onClick:l[0]||(l[0]=d=>_())},{default:M(()=>[c($,{name:a(F).Close,class:"mr-3 self-center"},null,8,["name"]),ct]),_:1})):C("",!0)]),e("div",dt,[t.events?(o(),Y(R,{key:0,events:t.events},null,8,["events"])):t.planet?(o(),r("div",ut,[e("div",mt,[c($,{name:t.planet,class:"h-full w-full"},null,8,["name"])])])):(o(),r("div",pt,[_t,e("div",ft,[gt,e("a",ht,[c(I)])])]))]),a(i).loggedIn?(o(),r("div",vt,[e("div",xt,[e("span",wt,S(a(te)(w.value.wallet)),1)]),c(D,{size:"sm",borderRadius:"60px",class:"px-[7px] md:px-4",tight:"",onClick:l[1]||(l[1]=d=>u.value=!u.value)},{default:M(()=>[e("span",yt,S(w.value.firstname)+" "+S(w.value.lastname),1),bt]),_:1}),u.value?(o(),r("div",{key:0,class:"fixed top-0 right-0 bottom-0 left-0",onClick:l[2]||(l[2]=d=>u.value=!1)})):C("",!0),u.value?(o(),r("div",{key:1,class:Z(["absolute top-0 right-0 min-w-[330px] rounded-[4px] bg-background",a(A)]),"data-aos":"fade-left"},[e("div",kt,[$t,e("strong",St,S(w.value.firstname)+" "+S(w.value.lastname),1),e("p",Ct,S(a(te)(w.value.wallet)),1),e("button",{class:"mb-6 inline-flex items-center",onClick:l[3]||(l[3]=d=>s())},[c($,{name:a(F).Edit},null,8,["name"]),Tt]),Vt,e("div",Et,[It,a(n)?(o(),r("span",At,"VIP Token")):(o(),r("span",Dt,"Classic Token"))]),Mt,a(g)!=="portal"?(o(),Y(N,{key:0,class:"!bg-transparent px-0 !text-white",size:"md","min-width":"180px"})):C("",!0),Rt,e("button",{class:"mb-1 uppercase",onClick:l[4]||(l[4]=d=>p())},"Log out")])],2)):C("",!0)])):a(g)!=="portal"?(o(),r("div",Nt,[c(N)])):(o(),r("div",Lt,[c(L,{class:Z(["white px-4",a(y)]),size:"sm",color:"gray-lighter",minHeight:"38px",minWidth:"223px",width:"auto",tracking:!1,style:{"border-radius":"60px"}},null,8,["class"])]))])]),c(U,{show:k.value,width:"1068px"},{default:M(()=>[Pt,e("div",Ut,[e("div",zt,[e("div",Ft,[Wt,Bt,e("p",jt,S(a(i).user.wallet),1),e("div",Ht,[Ot,a(n)?(o(),r("span",Yt,"VIP Token")):(o(),r("span",Gt,"Classic Token"))])])]),e("div",Kt,[c(P,{onClose:l[5]||(l[5]=d=>x())})])])]),_:1},8,["show"])],64)}}}),Qt={$style:Ae},es=Ie(qt,[["__cssModules",Qt],["__scopeId","data-v-b528921f"]]);export{Oe as _,es as a,ee as b,nt as c};
